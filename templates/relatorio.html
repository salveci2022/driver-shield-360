<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Relat√≥rio | {{ app_name }}</title>
  <link rel="icon" href="/static/icons/icon-192x192.png">
  <link rel="stylesheet" href="/static/style.css"/>
  <style>
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 8px;border-bottom:1px solid rgba(255,255,255,.1);text-align:left}
    th{opacity:.9}
    .small{opacity:.85;font-size:.95rem}
  </style>
</head>
<body class="aurora-bg">
  <div class="wrap">
    <header class="topbar">
      <div>
        <h1>üìÑ Relat√≥rio de Alertas</h1>
        <p class="small">√öltimos alertas registrados.</p>
      </div>
      <div class="top-actions">
        <button class="btn" onclick="location.href='/'">‚Üê Voltar</button>
        <button class="btn" onclick="location.href='/painel'">Painel</button>
      </div>
    </header>

    <section class="card">
      {% if alerts and alerts|length > 0 %}
      <table>
        <thead>
          <tr>
            <th>Data/Hora</th>
            <th>Ocorr√™ncia</th>
            <th>Motorista</th>
            <th>Localiza√ß√£o</th>
          </tr>
        </thead>
        <tbody>
          {% for a in alerts %}
          <tr>
            <td>{{ a.ts }}</td>
            <td><strong>{{ a.occurrence }}</strong></td>
            <td>{{ a.driver_name or '‚Äî' }}</td>
            <td>
              {% if a.lat is not none and a.lng is not none %}
                <a target="_blank" rel="noopener" href="https://maps.google.com/?q={{a.lat}},{{a.lng}}">{{a.lat}}, {{a.lng}}</a>
                <span class="small">(¬±{{a.accuracy or 0}}m)</span>
              {% else %}
                ‚Äî
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
        <p class="small">Ainda n√£o h√° alertas registrados.</p>
      {% endif %}
    </section>
  </div>
</body>
</html>
